% Hello, world!

Теперь, когда вы установили Rust, давайте напишем первую программу на Rust.
Традиционно, в любом новом изучаемом языке программирования, первая программа
только выводит на экран текст "Hello, World!". Хорошо начинать с такой простой
программы, т.к. вы можете убедиться, что ваш компилятор не только установлен, но
и работает правильно. Вывод информации на экран будет замечательным способом
проверить это.

Первое, с чего мы должны начать, это создать файл для нашего кода. Мне нравится
размещать каталог `projects` в домашней директории и хранить там все мои
проекты. Для Rust не имеет значения где располагается ваш код.

На самом деле это приводит к ещё одной проблеме о которой мы должны
предупредить: данное руководство предполагает, что у вас есть базовые навыки
работы в командной строке. У Rust нет специфичных требований к вашей среде
разработки или тому, где вы храните свой код. Если вы больше предпочитаете
использовать IDE, можно посмотреть на проект [SolidOak][solidoak], или на плагины
к вашей любимой IDE. Существует множество расширений разного качества, созданные
сообществом. Команда разработчиков Rust'a так же предоставила [плагины для
различных редакторов][plugins]. Настройка вашего редактора или IDE выходит за
пределы данного руководства. Посмотрите руководство по использованию выбранного
вами плагина.

[solidoak]: https://github.com/oakes/SolidOak
[plugins]: https://github.com/rust-lang/rust/blob/master/src/etc/CONFIGS.md

С учётом вышесказанного, давайте сделаем каталог для нашей программы в
директории с проектами.

```{bash}
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

Если вы используете Windows и не используете PowerShell, `~` может не работать.
Обратитесь к документации вашей оболочки для уточнения деталей.

Теперь создадим новый файл для текста программы. Назовём наш файл `main.rs`.
Файлы с исходными текстами на Rust'е всегда имеют расширение `.rs`. Если вы
хотите использовать в имени вашего файла больше одного слова, разделяйте их
подчёркиванием: `hello_world.rs`, а не `helloworld.rs`.

Теперь когда файл открыт, добавьте в него следующий код:

```{rust}
fn main() {
    println!("Hello, world!");
}
```

Сохраните файл, а затем введите эти команды в ваше окно терминала:

```{bash}
$ rustc main.rs
$ ./main # или main.exe в Windows
Hello, world!
```

Работает! Разберём подробнее что же произошло.

```{rust}
fn main() {

}
```

Эти строки определяют ‘функцию‘ в Rust'е. Функция `main` особенна: это начало
каждой программы на Rust. Первая строка говорит: "Я объявляю функцию именуемую
`main`, которая не получает параметров и ничего не возвращает". Если бы мы
хотели передать в функцию параметры, то указали бы их в скобках (`(` и `)`). Так
как нам не надо ничего возвращать из этой функции, мы можем опустить указание
типа возвращаемого значения. Мы вернёмся к этому позже.

Вы должны были заметить, что функция обёрнута в фигурные скобки (`{` и `}`).
Rust требует их вокруг тел всех функций. Так же хорошим стилем считается ставить
открывающую фигурную скобку на той же строке, что и объявление функции,
отделённую от него одним пробелом.

Теперь эта строка:

```{rust}
    println!("Hello, world!");
```

Эта строка делает всю работу в нашей маленькой программе. Тут есть несколько
нюансов, которые имеют существенное значение. Во-первых, отступ в четыре
пробела, а не табуляция. Пожалуйста, настройте выбранный вами редактор так,
чтобы вставлять четыре пробела при помощи клавиши табуляции. Мы предоставляем
некоторые [примеры настроек для различных редакторов][configs].

[configs]: https://github.com/rust-lang/rust/tree/master/src/etc/CONFIGS.md

Теперь разберёмся с `println!()`. Это вызов [макроса][macro], которыми
представлено метапрограммирование в Rust'e. Если бы вместо макроса была функция,
это бы выглядело следующим образом: `println()`. Для достижения нашей цели, нас
не должна волновать эта разница. Просто знайте, что иногда вы будете видеть `!`,
по которому можно понять, что вы вызываете макрос вместо обычной функции.
Rust реализует `println!` как макрос вместо функции по веским причинам, но это
достаточно глубокая тема о которой мы поговорим позже. И последнее, что нужно
отметить: макросы Rust'a значительно отличаются от макросов C, если вы их
использовали. Не бойтесь использовать макросы. В конце концов мы вернёмся к
деталям, а сейчас просто доверьтесь нам.

[macro]: macros.html

Идём дальше. `"Hello, world!"` - это ‘строка‘. Строки удивительно сложная тема в
системном языке программирования. Это ‘статически расположенная в памяти‘
строка. Если вы хотите больше узнать про расположении в памяти, рекомендуем
посмотреть про [стек и кучу][allocation], но если вы не хотите этого, вы можете
этого и не делать. Мы передаём строку в качестве аргумента в `println!`, который
выводит строки на экран. Это достаточно просто!

[allocation]: the-stack-and-the-heap.html

В завершение, строка заканчивается точкой с запятой (`;`). Rust `выражение-
ориентированный язык`, а это означает, что в нём большая часть вещей является
выражением. `;` используется для указания, что выражение закончилось и
начинается следующее. Большинство строк кода на Rust заканчивается на `;`.

На самом деле, завершением будет сборка и запуск нашей программы. Соберём
программу компилятором `rustc`, передав ему в качестве аргумента название нашего
файла с кодом:

```{bash}
$ rustc main.rs
```

Это похоже на `gcc` или `clang`, если вы программировали раньше на C или C++.
Rust создаст двоичный исполняемый файл. Вы можете убедиться в этом с помощью
`ls`:

```{bash}
$ ls
main  main.rs
```

Или в Windows:

```{bash}
$ dir
main.exe  main.rs
```

У нас есть два файла: наш исходный код, с расширением `.rs` и исполняемый файл
(`main.exe` в Windows, `main` в остальных случаях)

```{bash}
$ ./main  # или main.exe в Windows
```

Мы получили выведенный в окне терминала текст `"Hello, world!"`.

Если вы перешли из динамически-типизированных языков программирования вроде
Ruby, Python или JavaScript, вы не можете использовать эти два шага отдельно.
Rust *компилируемый перед исполнением* язык, это означает, что вы можете собрать
программу, дать её кому-то ещё, и ему не нужно устанавливать Rust. Если вы
передадите кому-нибудь `.rb`, `.py` или `.js` файл, им понадобится
Ruby/Python/JavaScript, чтобы скомпилировать и запустить вашу программу, но
запустить его они смогу одной командой. Все это взаимоисключаемо в дизайне
языков программирования, и Rust сделал свой выбор.

Поздравляем! Вы официально написали программу на Rust. Это делает вас Rust-
программистом! Добро пожаловать!

Дальше мы познакомимся с новым инструментом `Cargo`, который используется для
написания настоящих программ в Rust. Использовать `rustc` удобно лишь для
небольших программ, но по мере роста проекта, потребуется инструмент, помогающий
управлять настройками проекта, а также облегчит обмен кода с другими людьми и
проектами.
